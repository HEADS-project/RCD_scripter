
Script -> (Def | Statement)*

Def -> DefTable | DefRow | DefCell | DefFile | DefArray

DefTable  -> <TABLE>   VarTable <=>  <TABLE> <(> (VarTable)? <)> 
DefRow    -> <ROW>     VarRow <=> <ROW> <(> (CellList | VarRow)? <)>
DefCell   -> <CELL> VarCell <=> <CELL> <(> Cell | VarCell <)>
DefFile   -> <FILE>    VarFile <=> <OPENFILE> <(> String <,> String <)>
DefValue  -> <VALUE>    VarValue <=> <VALUE> <(> Expr | VarValue <)>
DefArray  -> <ARRAY>   VarArray <=>  <ARRAY> <(> Expr <)> 

Statement -> ForBlock | IfBlock | VarMethod | Print | Fprint 
ForBlock -> <FOR_EACH> <(> ForType Var <IN> Var <)> <{> Statement <}>
ForType -> <ROW> | <INT>

IfBlock -> <IF> <(> IfTest <)> <{> Statement <}>
IfTest -> TestHas
TestHas -> Var <.> <HAS> <(> Cell <)> 

VarMethod -> Var <.> (M_Add | M_Setdefault | Print )
M_Add -> <ADD> <(> CellList | Var <)>
M_Setdefault -> <SETDEF> <(> CellList | Var <)> 

Print -> <PRINT><(> ConcatString <)> 
Fprint -> <FPRINT><(> Var <,> ConcatString <)> 

CellList -> Cell (<,> Cell)*
Cell -> Tupl | VarCell | VarIdCell 
Tupl -> <{>Id, Expr <}>
VarIdCell -> Var <.> <CELL><(> Id <)>

Var = Var (Table)
Var = Var (Row)
Var = Var (Cell)

Var <=> Expr
Var <=> Var

Expr -> NumExpr | TxtExpr

NumExpr -> Term ( AddOp Term )*
AddOp -> ["+","-"]
Term -> Factor (MulOp Factor)*
MulOp -> ["*","/"]
Factor -> Num |  VarValue | VarIdValue 

TxtExpr -> (String | Id)  (<+> TxtElement)*
TxtElement -> String | Num | Id | VarValue | VarIdValue

VarIdValue -> Var <.> <VALUE> <(> (Id) <)>    // Return VALUE
Num -> Dec | Hex
Dec -> Digit+
Hex -> "0" ["x","X"] (HexDigit)+ 

VarTable -> Var
VarRow -> Var
VarCell -> Var
VarFile -> Var
VarValue -> Var
VarArray -> Var
Var -> <$>Id
Id -> Letter+
String -> "...."


JOB OBJECTS

JobDefTable -> CtxCopyDefTable ( New | Var )

JobDefRow -> CtxCopyDefRow ( New | Var )
          -> JobCellList ->

JobDefCell -> JobCopyDefCell ( Var ) 
           -> JobCell

JobDefFile -> JobConcatString

JobDefString -> JobConcatString

JobDefInt -> CtxCopyDefInt ( Var )
          -> JobConcatString

JobDefArray -> CtxCopyDefArray ( New | Var )

JobStatement -> JobForBlock | IfBlock | VarMethod | Print

JobForBlock -> CtxGetDefTable ( Var )
            -> CtxSetDefRow ( Var )
            -> CtxSetDefInt ( Var )
            -> JobStatement

JobIfBlock -> JobStatement

JobVarAdd -> CtxGetDefRow( Var )
          -> CtxGetDefArray( Var )

JobVarSetDefault -> CtxGetDefRow( Var )
                 -> CtxGetDefArray( Var )

JobPrint  -> JobConcatString
JobFprint -> CtxGetDefFile( Var)
          -> JobConcatString

String JobConcatString -> (JobCele)+
String JobCele         -> JobString
                       -> JobVarTxt 
                       -> JobGetDefString ( Var )
String JobVarTxt -> CtxGetDefRow ( Var )
int    JobVarInt -> CtxGetDefRow ( Var )

row  JobCellList -> (JobCell)+
cell JobCell -> JobTupl
             -> JobVarCell -> CtxGetDefRow ( Var )

table Ctx.CopyDefTable 
row   Ctx.CopyDefRow 
int   Ctx.CopyDefInt 
array Ctx.CopyDefArray 

table Ctx.GetDefTable
row   Ctx.GetDefRow 
row   Ctx.GetDefCell 
int   Ctx.GetDefInt 
array Ctx.GetDefArray 
file  Ctx.GetDefFile 

void  Ctx.SetDefRow(row)
void  Ctx.SetDefInt(int) 
